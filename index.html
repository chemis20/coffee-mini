<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>BrewPoint –ü—Ä–µ–¥–∑–∞–∫–∞–∑</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');
    body{background:#f7f3ee;font-family:'Inter',sans-serif;margin:0;padding:16px;color:#333}
    .section{margin-bottom:24px}
    .section h2{color:#8b5e34;font-weight:600;margin:0 0 8px 0}
    .card{width:160px;background:#fff;border-radius:16px;display:inline-block;margin:8px;box-shadow:0 4px 12px rgba(0,0,0,.08);text-align:center;overflow:hidden}
    .card img{width:100%;height:100px;object-fit:cover;border-radius:16px 16px 0 0}
    .card h3{margin:8px 0 4px;font-size:15px;font-weight:600}
    .card p.desc{font-size:12px;color:#555;margin:0 4px 6px}
    .card .price{font-weight:600;color:#8b5e34}
    button{background:#a67c52;color:#fff;border:none;border-radius:12px;padding:8px 12px;font-size:14px;cursor:pointer;transition:.2s}
    button:hover{background:#8b5e34}
    .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);z-index:999}
    .modal-content{background:#fff;border-radius:20px;padding:24px;box-shadow:0 8px 24px rgba(0,0,0,.15)}
    .time-btn{display:block;width:100%;margin:8px 0;padding:10px;background:#8b5e34;color:#fff;border:none;border-radius:8px}
  </style>
</head>
<body>

<h1>–ü—Ä–µ–¥–∑–∞–∫–∞–∑ BrewPoint</h1>

<!-- –ö–æ—Ñ–µ -->
<div class="section">
  <h2>–ö–æ—Ñ–µ</h2>
  <div class="card">
    <img src="https://images.unsplash.com/photo-1572442388796-11668a67e53d?auto=format&fit=crop&w=300&q=80">
    <h3>–õ–∞—Ç—Ç–µ</h3>
    <p class="desc">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–æ–ª–æ—á–Ω—ã–π –∫–æ—Ñ–µ</p>
    <p class="price">200‚ÇΩ</p>
    <button onclick="openModal('–õ–∞—Ç—Ç–µ',200)">–í –∫–æ—Ä–∑–∏–Ω—É</button>
  </div>
  <div class="card">
    <img src="https://images.unsplash.com/photo-1541167760496-1628856ab772?auto=format&fit=crop&w=300&q=80">
    <h3>–ö–∞–ø—É—á–∏–Ω–æ</h3>
    <p class="desc">–ù–∞—Å—ã—â–µ–Ω–Ω—ã–π –≤–∫—É—Å —Å –º–æ–ª–æ—á–Ω–æ–π –ø–µ–Ω–∫–æ–π</p>
    <p class="price">180‚ÇΩ</p>
    <button onclick="openModal('–ö–∞–ø—É—á–∏–Ω–æ',180)">–í –∫–æ—Ä–∑–∏–Ω—É</button>
  </div>
</div>

<!-- –î–µ—Å–µ—Ä—Ç—ã -->
<div class="section">
  <h2>–î–µ—Å–µ—Ä—Ç—ã</h2>
  <div class="card">
    <img src="https://images.unsplash.com/photo-1587314168485-3236d6710814?auto=format&fit=crop&w=300&q=80">
    <h3>–ö—Ä—É–∞—Å—Å–∞–Ω</h3>
    <p class="desc">–°–ª–æ—ë–Ω–æ–µ —Ç–µ—Å—Ç–æ —Å —Ö—Ä—É—Å—Ç—è—â–µ–π –∫–æ—Ä–æ—á–∫–æ–π</p>
    <p class="price">120‚ÇΩ</p>
    <button onclick="addToCart('–ö—Ä—É–∞—Å—Å–∞–Ω',120)">–í –∫–æ—Ä–∑–∏–Ω—É</button>
  </div>
  <div class="card">
    <img src="https://images.unsplash.com/photo-1607478900766-efe13248b125?auto=format&fit=crop&w=300&q=80">
    <h3>–ß–∏–∑–∫–µ–π–∫</h3>
    <p class="desc">–ù–µ–∂–Ω—ã–π —Ç–≤–æ—Ä–æ–∂–Ω—ã–π –¥–µ—Å–µ—Ä—Ç</p>
    <p class="price">220‚ÇΩ</p>
    <button onclick="addToCart('–ß–∏–∑–∫–µ–π–∫',220)">–í –∫–æ—Ä–∑–∏–Ω—É</button>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ -->
<div id="modal" class="modal">
  <div class="modal-content">
    <h3>–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã</h3>
    <label><input type="checkbox" id="sugar"> 1 –ª–æ–∂–∫–∞ —Å–∞—Ö–∞—Ä–∞ (+0‚ÇΩ)</label><br>
    <label><input type="checkbox" id="vanilla"> –í–∞–Ω–∏–ª—å–Ω—ã–π (+20‚ÇΩ)</label><br>
    <label><input type="checkbox" id="caramel"> –ö–∞—Ä–∞–º–µ–ª—å–Ω—ã–π (+20‚ÇΩ)</label><br>
    <label><input type="checkbox" id="chocolate"> –®–æ–∫–æ–ª–∞–¥–Ω—ã–π (+20‚ÇΩ)</label><br>
    <button onclick="confirmModal()">–î–∞–ª–µ–µ –∫ –≤—Ä–µ–º–µ–Ω–∏</button>
    <button onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ -->
<div id="timeModal" class="modal">
  <div class="modal-content">
    <h3>–ö–æ–≥–¥–∞ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å?</h3>
    <button class="time-btn" onclick="selectTime('–°–µ–π—á–∞—Å')">–í –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è</button>
    <button class="time-btn" onclick="selectTime('–ß–µ—Ä–µ–∑ 30 –º–∏–Ω')">–ß–µ—Ä–µ–∑ 30 –º–∏–Ω—É—Ç</button>
    <button class="time-btn" onclick="selectTime('–ß–µ—Ä–µ–∑ 1 —á–∞—Å')">–ß–µ—Ä–µ–∑ 1 —á–∞—Å</button>
    <label>–°–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç: <input type="time" id="customTime"></label>
    <button onclick="selectCustom()">–°–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç</button>
  </div>
</div>

<!-- –ö–æ—Ä–∑–∏–Ω–∞ -->
<div id="cart">
  <h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
  <ul id="cart-list"></ul>
  <p id="timeLine">–í—Ä–µ–º—è: –Ω–µ –≤—ã–±—Ä–∞–Ω–æ</p>
  <p>–ò—Ç–æ–≥–æ: <span id="total">0</span>‚ÇΩ</p>
  <button onclick="pay()">–û–ø–ª–∞—Ç–∏—Ç—å</button>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ ¬´–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–∫–∞–∑¬ª -->
<div id="checkoutModal" class="modal">
  <div class="modal-content">
    <h3>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–∫–∞–∑</h3>
    <p><b>–ê–¥—Ä–µ—Å –∫–æ—Ñ–µ–π–Ω–∏:</b> —É–ª. –õ–µ–Ω–∏–Ω–∞, 10 (BrewPoint)</p>
    <ul id="finalList"></ul>
    <p><b>–°—É–º–º–∞:</b> <span id="finalTotal">0</span>‚ÇΩ</p>
    <p><b>–í—Ä–µ–º—è:</b> <span id="finalTime">‚Äî</span></p>
    <button onclick="closeCheckout()">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∫–∞—Ç–∞–ª–æ–≥—É</button>
    <button onclick="fakePay()">–û–ø–ª–∞—Ç–∏—Ç—å</button>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ ¬´–ó–∞–∫–∞–∑ –æ–ø–ª–∞—á–µ–Ω¬ª -->
<div id="successModal" class="modal">
  <div class="modal-content">
    <h3>–ó–∞–∫–∞–∑ –æ–ø–ª–∞—á–µ–Ω!</h3>
    <p>–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞: #<span id="orderNumber">12345</span></p>
    <p>–ñ–¥—ë–º –≤–∞—Å –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏.</p>
    <button onclick="window.location.reload()">–ù–æ–≤—ã–π –∑–∞–∫–∞–∑</button>
  </div>
</div>

<script>
  let cart = [];
  let selectedTime = null;
  let currentItem = null;

  /* ---------- –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã ---------- */
  function openModal(name, price){
    currentItem = {name, price};
    document.getElementById('modal').style.display = 'block';
  }
  function closeModal(){
    document.getElementById('modal').style.display = 'none';
  }
  function confirmModal(){
    let total = currentItem.price;
    const mods = [];
    if(document.getElementById('sugar').checked) mods.push('—Å–∞—Ö–∞—Ä');
    if(document.getElementById('vanilla').checked){ mods.push('–≤–∞–Ω–∏–ª—å'); total += 20; }
    if(document.getElementById('caramel').checked){ mods.push('–∫–∞—Ä–∞–º–µ–ª—å'); total += 20; }
    if(document.getElementById('chocolate').checked){ mods.push('—à–æ–∫–æ–ª–∞–¥'); total += 20; }
    const name = currentItem.name + (mods.length ? ' (' + mods.join(', ') + ')' : '');
    currentItem = {name, price: total};
    closeModal();
    openTimeModal();
  }

  /* ---------- –≤—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏ ---------- */
  function openTimeModal(){
    document.getElementById('timeModal').style.display = 'block';
  }
  function closeTimeModal(){
    document.getElementById('timeModal').style.display = 'none';
  }
  function selectTime(time){
    selectedTime = time;
    addToCart(currentItem.name, currentItem.price);
    closeTimeModal();
  }
  function selectCustom(){
    const val = document.getElementById('customTime').value;
    if (!val) { alert('–£–∫–∞–∂–∏—Ç–µ –≤—Ä–µ–º—è'); return; }
    selectedTime = val;
    addToCart(currentItem.name, currentItem.price);
    closeTimeModal();
  }

  /* ---------- –∫–æ—Ä–∑–∏–Ω–∞ ---------- */
  function addToCart(name, price){
    cart.push({name, price, time: selectedTime});
    updateCart();
  }
  function updateCart(){
    const list=document.getElementById('cart-list');
    list.innerHTML='';
    cart.forEach(i=>list.innerHTML+=`<li>${i.name} ${i.price}‚ÇΩ ‚Äì ${i.time}</li>`);
    document.getElementById('total').textContent=cart.reduce((s,i)=>s+i.price,0);
    document.getElementById('timeLine').textContent=`–í—Ä–µ–º—è: ${selectedTime || '–Ω–µ –≤—ã–±—Ä–∞–Ω–æ'}`;
  }

  /* ---------- —á–µ–∫ + –æ–ø–ª–∞—Ç–∞-–∑–∞–≥–ª—É—à–∫–∞ ---------- */
  function pay(){
    if(cart.length === 0){ alert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞'); return; }
    document.getElementById('finalList').innerHTML = cart.map(i => `<li>${i.name} ${i.price}‚ÇΩ ‚Äì ${i.time}</li>`).join('');
    document.getElementById('finalTotal').textContent = cart.reduce((s,i)=>s+i.price,0);
    document.getElementById('finalTime').textContent = selectedTime || '‚Äî';
    document.getElementById('checkoutModal').style.display = 'block';
  }
  function closeCheckout(){
    document.getElementById('checkoutModal').style.display = 'none';
  }
  function fakePay(){
    const order = cart.map(i=>`${i.name} ${i.price}‚ÇΩ ‚Äì ${i.time}`).join('\n');
    const total = cart.reduce((s,i)=>s+i.price,0);
    const msg = `‚úÖ –ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω!\n\nüìã –°–æ—Å—Ç–∞–≤:\n${order}\nüí∞ –°—É–º–º–∞: ${total}‚ÇΩ\n‚è∞ –í—Ä–µ–º—è: ${selectedTime}`;
    
    // 1. –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–∏–Ω–∏-–∞–ø
    Telegram.WebApp.close();
    
    // 2. –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç (–¥–ª—è –¥–µ–º–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–ª–µ—Ä—Ç)
    // –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Bot API:
    Telegram.WebApp.sendData(JSON.stringify({
      command:'order',
      items: cart,
      total: total,
      time: selectedTime
    }));
    alert(msg); // —É–±—Ä–∞—Ç—å –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è Bot API
    
    // 3. –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–∫–Ω–æ ¬´–ó–∞–∫–∞–∑ –æ–ø–ª–∞—á–µ–Ω¬ª
    document.getElementById('orderNumber').textContent = Math.floor(Math.random()*90000)+10000;
    document.getElementById('checkoutModal').style.display = 'none';
    document.getElementById('successModal').style.display = 'block';
  }
</script>
</body>
</html>
    }
  </script>
</body>
</html> 
